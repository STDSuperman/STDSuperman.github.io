(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{409:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"èƒŒæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯"}},[t._v("#")]),t._v(" èƒŒæ™¯")]),t._v(" "),a("p",[t._v("åœ¨å½“ä»Š"),a("code",[t._v("Webpack")]),t._v("æ¨ªè¡Œçš„æ—¶ä»£ï¼Œ"),a("code",[t._v("Webpack")]),t._v("çš„å½±å“åŠ›ä¸å¯è°“ä¹‹ä¸å¤§ã€‚å¯¹äºä¸€ä¸ªä¸»æµ"),a("code",[t._v("Web")]),t._v("é¡¹ç›®çš„å¼€å‘è€Œè¨€ï¼Œå¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½ä¼šé‡‡ç”¨ç°æœ‰çš„è„šæ‰‹æ¶ä½œä¸ºé¡¹ç›®å¼€å‘æˆ–æ‰“åŒ…å·¥å…·å¦‚ï¼š"),a("code",[t._v("Vue-cli")]),t._v("ã€"),a("code",[t._v("Cra")]),t._v("ï¼Œè€Œä»–ä»¬éƒ½åŸºäº"),a("code",[t._v("Webpack")]),t._v("ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸æ–­çš„ä½¿ç”¨å’Œæ—¥å¸¸é¡¹ç›®çš„è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬æ…¢æ…¢ä¼šèµ°å…¥ä¸€ä¸ªçª˜å¢ƒï¼Œå°±ä¼šå‡ºç°æˆ‘ä»¬ç¨å¾®æ”¹åŠ¨ä¸€è¡Œä»£ç æˆ‘ä»¬å°±éœ€è¦ç­‰å¾…åå‡ ç§’ç”šè‡³æ˜¯æ•°åç§’çš„æƒ…å†µï¼Œè¿™å¯¹äºæˆ‘ä»¬æ—¥ç›Šå¢é•¿çš„ä¸šåŠ¡å¼€å‘æ¥è¯´æ˜¯ååˆ†ä¸å‹å¥½çš„ã€‚")]),t._v(" "),a("p",[t._v("æ·±å…¥"),a("code",[t._v("Webpack")]),t._v("æ‰“åŒ…åŸç†æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çŸ¥é“ä»–çš„ç¼–è¯‘è¿‡ç¨‹æ˜¯é™æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä¼šæŠŠæ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„ä»£ç å…¨éƒ¨è¿›è¡Œæ‰“åŒ…æ„å»ºï¼Œä¼šå€ŸåŠ©èƒ¶æ°´ä»£ç ç”¨æ¥ç»„è£…å„æ¨¡å—ï¼Œè¿™æ ·æ‰“åŒ…å‡ºæ¥çš„ä»£ç æ˜¯ååˆ†åºå¤§çš„ï¼Œå¾ˆå¤šæ—¶å€™å…¶å®æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¹¶ä¸éœ€è¦å…¨éƒ¨ä»£ç çš„åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€å°éƒ¨åˆ†ï¼Œè¿™ä¸ªæ—¶å€™å¤§é‡çš„æ„å»ºæ—¶é—´éƒ½æ˜¯å¤šä½™çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤ŸçœŸæ­£æ„ä¹‰ä¸Šå®ç°æ‡’åŠ è½½çš„å¼€å‘å·¥å…·ã€‚")]),t._v(" "),a("p",[t._v("å¸¦ç€è¿™æ ·çš„ç—›ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹"),a("code",[t._v("Vite")]),t._v("ç»™æˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆã€‚")]),t._v(" "),a("h2",{attrs:{id:"vite-æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vite-æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" Vite æ˜¯ä»€ä¹ˆ")]),t._v(" "),a("p",[a("code",[t._v("Vite")]),t._v(" æ˜¯ä¸€ä¸ªç”±åŸç”Ÿ"),a("code",[t._v("ESM")]),t._v(" é©±åŠ¨çš„ "),a("code",[t._v("Web")]),t._v(" å¼€å‘æ„å»ºå·¥å…·ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸‹åŸºäºæµè§ˆå™¨åŸç”Ÿ"),a("code",[t._v("ES imports")]),t._v(" å¼€å‘ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹åŸºäº"),a("code",[t._v("Rollup")]),t._v("æ‰“åŒ…ã€‚")]),t._v(" "),a("p",[t._v("å®ƒä¸»è¦å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å¿«é€Ÿçš„å†·å¯åŠ¨")])]),t._v(" "),a("li",[a("p",[t._v("å³æ—¶çš„æ¨¡å—çƒ­æ›´æ–°")])]),t._v(" "),a("li",[a("p",[t._v("çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘")])])]),t._v(" "),a("p",[t._v("å…¶æœ€å¤§çš„ç‰¹ç‚¹æ˜¯åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨ "),a("code",[t._v("export")]),t._v("ã€"),a("code",[t._v("import")]),t._v(" çš„æ–¹å¼å¯¼å…¥å’Œå¯¼å‡ºæ¨¡å—ï¼Œåœ¨ "),a("code",[t._v("script")]),t._v(" æ ‡ç­¾é‡Œè®¾ç½® "),a("code",[t._v('type="module"')]),t._v("ï¼Œæµè§ˆå™¨ä¼šè¯†åˆ«æ‰€æœ‰æ·»åŠ äº†"),a("code",[t._v("type='module'")]),t._v("çš„"),a("code",[t._v("script")]),t._v("æ ‡ç­¾ï¼Œå¯¹äºè¯¥æ ‡ç­¾ä¸­çš„"),a("code",[t._v("import")]),t._v("å…³é”®å­—ï¼Œæµè§ˆå™¨ä¼šå‘èµ·"),a("code",[t._v("http")]),t._v("è¯·æ±‚è·å–æ¨¡å—å†…å®¹ã€‚")]),t._v(" "),a("h2",{attrs:{id:"åŸºæœ¬æ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬æ¶æ„"}},[t._v("#")]),t._v(" åŸºæœ¬æ¶æ„")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed6a083356014c4c87b59b4cfb9520a6~tplv-k3u1fbpfcp-zoom-1.image",alt:"ç³»ç»Ÿæ¶æ„å›¾"}})]),t._v(" "),a("p",[t._v("ç®€æ˜“ç‰ˆçš„"),a("code",[t._v("vite")]),t._v("å¤§ä½“ç»“æ„å¦‚ä¸Šï¼ŒæŒ‰ç…§æ•´ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬éœ€è¦é€ä¸€å®ç°è¿™äº›ä¸­é—´ä»¶ï¼Œå®ç°ä¸€ä¸ª"),a("code",[t._v("vite")]),t._v("å¼€å‘å·¥å…·ã€‚")]),t._v(" "),a("p",[t._v("å›¾ä¸­çš„ç›®æ ‡é¡¹ç›®å³æˆ‘ä»¬å¼€å‘æ—¶çš„é¡¹ç›®ï¼Œ"),a("code",[t._v("vite")]),t._v("æœåŠ¡åœ¨è§£ææ¨¡å—è·¯å¾„ä»¥åŠè¯»å–æ–‡ä»¶å†…å®¹æ—¶éœ€è¦è®¿é—®ç›®æ ‡é¡¹ç›®ä¸­çš„æ¨¡å—å†…å®¹æˆ–è€…é…ç½®æ–‡ä»¶ç­‰ã€‚")]),t._v(" "),a("p",[t._v("å®Œæ•´é¡¹ç›®ä»£ç åœ°å€ï¼š"),a("a",{attrs:{href:"https://github.com/STDSuperman/my-vite",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/STDSuperman/my-vite"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"èµ°è¿›-vite-åŸç†åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èµ°è¿›-vite-åŸç†åˆ†æ"}},[t._v("#")]),t._v(" èµ°è¿› Vite åŸç†åˆ†æ")]),t._v(" "),a("p",[t._v("åœ¨å¼€å§‹æ‰‹æ’¸ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹"),a("code",[t._v("Vite")]),t._v("å¦‚ä½•ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆæˆ‘ä»¬å…ˆä½¿ç”¨"),a("code",[t._v("vite")]),t._v("åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("Vue3")]),t._v("é¡¹ç›®ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹å¼ä¸€ï¼š")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g create-vite-app\n$ create-vite-app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ï¼ˆæˆ– cva "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("ï¼‰\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("ul",[a("li",[t._v("æ–¹å¼äºŒï¼š")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init vite-app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("å¯åŠ¨é¡¹ç›®åï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ä¼šæœ‰ä¸€ä¸ªä¼˜åŒ–ä¾èµ–çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€æ¬¡å¯åŠ¨å¯èƒ½ç›¸å¯¹è€Œè¨€ä¼šæ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯ä½ å†æ¬¡å¯åŠ¨æ—¶ä½ ä¼šå‘ç°å®ƒçš„é€Ÿåº¦åŸºæœ¬æ—¶æ¯«ç§’çº§ï¼Œå®Œå…¨æ²¡æœ‰"),a("code",[t._v("Webpack")]),t._v("å¯åŠ¨é¡¹ç›®é‚£èˆ¬çš„æ²‰é‡æ„Ÿã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æ‰“å¼€å¯¹åº”çš„ç½‘é¡µï¼Œå°±ç°è±¡ä¸Šè€Œè¨€ï¼Œæˆ‘ä»¬å‡ ä¹æ²¡æœ‰å‘ç°å’Œ"),a("code",[t._v("Webpack")]),t._v("å¯åŠ¨çš„æœ‰ä»€ä¹ˆä¸ä¸€æ ·ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‰“å¼€"),a("code",[t._v("Network")]),t._v("ï¼Œç„¶ååˆ·æ–°é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå®ƒçš„è¯·æ±‚æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œä¸å†æ˜¯"),a("code",[t._v("webpack")]),t._v("é•¿é•¿çš„"),a("code",[t._v("bundle")]),t._v("ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ªå°çš„è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ç‚¹å¼€"),a("code",[t._v("main.js")]),t._v("ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¼šå‘ç°ï¼Œå’Œæˆ‘ä»¬å†™çš„å®é™…ä»£ç å‡ ä¹æ²¡æœ‰åŒºåˆ«ï¼Œå”¯ä¸€æ”¹å˜çš„å°±æ˜¯éƒ¨åˆ†å¯¼å…¥çš„æ¨¡å—è·¯å¾„è¢«ä¿®æ”¹äº†ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d50e044706e4329907106d1d2a263a1~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20200909223433589"}})]),t._v(" "),a("p",[t._v("ä¸ä»…å¦‚æ­¤ï¼Œä»å…¶ä»–è¯·æ±‚ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¯ä¸€ä¸ª"),a("code",[t._v(".vue")]),t._v("æ–‡ä»¶éƒ½è¢«æ‹†åˆ†æˆäº†å¤šä¸ªè¯·æ±‚ï¼Œå¹¶é€šè¿‡"),a("code",[t._v("type")]),t._v("æ¥æ ‡è¯†æ˜¯"),a("code",[t._v("template")]),t._v("è¿˜æ˜¯"),a("code",[t._v("style")]),t._v("ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86475c6eb58e47b993dfe7f374c0227b~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20200909223250307"}})]),t._v(" "),a("p",[t._v("ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ"),a("code",[t._v("vite")]),t._v("åœ¨è¿™é‡Œåšäº†ä¸¤ä»¶äº‹ï¼Œç¬¬ä¸€æ˜¯ä¿®æ”¹äº†æ¨¡å—è¯·æ±‚è·¯å¾„ï¼Œç¬¬äºŒå°±æ˜¯å°†"),a("code",[t._v(".vue")]),t._v("æ–‡ä»¶è¿›è¡Œè§£ææ‹†åˆ†ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸Šé¢æè¿°çš„ä¸¤ä»¶äº‹åªæ˜¯æœ¬æ–‡ä¼šè¿›è¡Œè¯¦ç»†è®²è§£çš„æœ‰å…³äº"),a("code",[t._v("Vite")]),t._v("å®ç°çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¯´"),a("code",[t._v("Vite")]),t._v("åªå¹²äº†è¿™ä¸¤ä»¶äº‹ ğŸ‘€ï¼Œ"),a("code",[t._v("Vite")]),t._v("çš„åŠŸèƒ½è¿˜æ˜¯ååˆ†å¼ºå¤§çš„ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"å¼€å§‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å§‹"}},[t._v("#")]),t._v(" å¼€å§‹")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¼€å§‹æ‰“é€ æˆ‘ä»¬è‡ªå·±çš„"),a("code",[t._v("Vite")]),t._v("å·¥å…·ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆéœ€è¦å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å¦‚ä½•è®©æˆ‘ä»¬çš„ å·¥å…·åœ¨ä»»ä½•ä¸€ä¸ª"),a("code",[t._v("Vue3")]),t._v("é¡¹ç›®ä¸­èƒ½ä½¿ç”¨å‘½ä»¤è¿›è¡Œå¯åŠ¨ã€‚")]),t._v(" "),a("p",[t._v("é¡¹ç›®ç›®å½•æ¦‚è§ˆï¼ˆè¯¦ç»†ç›®å½•æ–‡ä»¶ä»¥å®é™…é¡¹ç›®ä¸ºå‡†ï¼‰ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("bin")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("www.js")])])])]),t._v(" "),a("li",[a("code",[t._v("node_modules")])]),t._v(" "),a("li",[a("code",[t._v("plugins")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("server")])])])]),t._v(" "),a("li",[a("code",[t._v("index.js")])]),t._v(" "),a("li",[a("code",[t._v("package.json")])])]),t._v(" "),a("ol",[a("li",[t._v("åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º"),a("code",[t._v("bin")]),t._v("ç›®å½•ï¼Œå¹¶åœ¨"),a("code",[t._v("bin")]),t._v("ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("www.js")]),t._v("æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("env node\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" createServer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../index'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app is start port 4000: localhost:4000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("å…¶å®è¿™é‡Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå®é™…ä¸Šæ˜¯å¯¼å…¥æ ¹ç›®å½•"),a("code",[t._v("index.js")]),t._v("ä¸­æš´éœ²çš„åˆ›å»ºæœåŠ¡æ–¹æ³•ï¼Œä»¥"),a("code",[t._v("index.js")]),t._v("ä½œä¸ºæ ¸å¿ƒé€»è¾‘çš„å…¥å£æ–‡ä»¶ï¼Œå…·ä½“çš„"),a("code",[t._v("index.js")]),t._v("æ–‡ä»¶ç›¸å…³ä»£ç ä¸‹é¢ä¼šè¿›è¡Œè¯¦ç»†æè¿°ã€‚")]),t._v(" "),a("p",[t._v("åŒæ—¶å¯¹äºå¦‚ä¸Šä»£ç ä¸­æˆ‘ä»¬éœ€è¦æ³¨æ„çš„ç‚¹åœ¨äºå¤´éƒ¨çš„ä¸€ä¸²"),a("code",[t._v("#!......")]),t._v("ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç”¨äºå£°æ˜è¯¥æ–‡ä»¶ä»¥"),a("code",[t._v("node")]),t._v("ç¯å¢ƒæ¥æ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("ç„¶åæˆ‘ä»¬å†å°†å…³æ³¨ç‚¹è½¬ç§»åˆ°"),a("code",[t._v("package.json")]),t._v("æè¿°æ–‡ä»¶ä¸­ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"molu-vite"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./bin/www.js"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬æš‚æ—¶åªéœ€è¦å…³æ³¨åˆ°è¿™ä¸ª"),a("code",[t._v("bin")]),t._v("å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­å£°æ˜è‡ªå®šä¹‰çš„å‘½ä»¤ï¼Œä»¥åŠéœ€è¦å¯æ‰§è¡Œçš„æ–‡ä»¶è·¯å¾„ã€‚ç„¶ååœ¨å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ç»ˆç«¯ä¸­è¾“å…¥"),a("code",[t._v("npm link")]),t._v("ï¼Œå°±è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æˆ‘ä»¬åŸå…ˆåˆ›å»ºçš„"),a("code",[t._v("Vue3")]),t._v("æ ¹ç›®å½•ä¸‹ä½¿ç”¨"),a("code",[t._v("molu-vite")]),t._v("æ¥å¼€å¯ä¸€ä¸ªæœ¬åœ°æœåŠ¡äº†ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™é‡Œçš„"),a("code",[t._v("bin")]),t._v("æ‰€åœ¨é¡¹ç›®æ˜¯æˆ‘ä»¬ç‹¬ç«‹åˆ›å»ºç”¨äºå®ç°"),a("code",[t._v("vite")]),t._v("çš„é¡¹ç›®ï¼Œ"),a("code",[t._v("Vue3")]),t._v("é¡¹ç›®æ˜¯æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºçš„é¡¹ç›®ï¼Œåˆ«å¼„æ··äº†...")])]),t._v(" "),a("h3",{attrs:{id:"åˆ›å»ºæœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºæœåŠ¡"}},[t._v("#")]),t._v(" åˆ›å»ºæœåŠ¡")]),t._v(" "),a("p",[t._v("åˆšåˆšä¸Šé¢æˆ‘ä»¬åœ¨"),a("code",[t._v("www.js")]),t._v("å¯¼å…¥äº†ä¸€ä¸ª"),a("code",[t._v("createServer")]),t._v("æ–¹æ³•ç”¨äºåˆ›å»ºæœåŠ¡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥å®ç°è¿™éƒ¨åˆ†ä»£ç ï¼Œæ‰“å¼€æ ¹ç›®å½•çš„"),a("code",[t._v("index.js")]),t._v("æ–‡ä»¶ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v("  Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("å…ˆç§»é™¤ä¸å¿…è¦çš„ä»£ç ï¼Œæˆ‘ä»¬å°±èƒ½æ¸…æ™°çœ‹å‡ºæ¥ï¼Œè¿™é‡Œä½¿ç”¨äº†"),a("code",[t._v("koa")]),t._v("æ¥å¯åŠ¨ä¸€ä¸ªç®€å•æœåŠ¡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹é€ä¸€å®ç°"),a("code",[t._v("vite")]),t._v("çš„èƒ½åŠ›ã€‚")]),t._v(" "),a("h3",{attrs:{id:"æ‰˜ç®¡é™æ€èµ„æº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ‰˜ç®¡é™æ€èµ„æº"}},[t._v("#")]),t._v(" æ‰˜ç®¡é™æ€èµ„æº")]),t._v(" "),a("p",[t._v("ä¸ºäº†ç»“æ„æ¸…æ™°ï¼Œè¿™é‡Œå°†ä¼šæŠŠç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªæ’ä»¶ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†ç›®æ ‡é¡¹ç›®çš„å†…å®¹è¿›è¡Œæ‰˜ç®¡ï¼Œæˆ‘ä»¬åœ¨è‡ªå·±çš„"),a("code",[t._v("vite")]),t._v("é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶"),a("code",[t._v("plugins/server/serveStaticPlugin.js")]),t._v("ï¼Œè¿™ä¸ªæ–‡ä»¶å°†å¯¼å‡ºä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç†é™æ€èµ„æºçš„æ–¹æ³•ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/server/serveStaticPlugin.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v("  KoaStatic "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-static'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("KoaStatic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("KoaStatic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'public'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("å†…å®¹ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œä½¿ç”¨äº†"),a("code",[t._v("koa-static")]),t._v("ä¸­é—´ä»¶æ¥æ‰˜ç®¡é™æ€èµ„æºï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦æ‹¿åˆ°"),a("code",[t._v("koa")]),t._v("å®ä¾‹ï¼ˆ"),a("code",[t._v("app")]),t._v("ï¼‰ï¼Œå…¶æ¬¡éœ€è¦è·å–åˆ°ç›®æ ‡é¡¹ç›®çš„æ ¹ç›®å½•è·¯å¾„ï¼ˆ"),a("code",[t._v("root")]),t._v("ï¼‰ï¼Œå°†ç›®æ ‡é¡¹ç›®è¿›è¡Œæ•´ä½“æ‰˜ç®¡ï¼ŒåŒæ—¶å¯¹äºç›®æ ‡é¡¹ç›®çš„ "),a("code",[t._v("public")]),t._v("ç›®å½•ä¹Ÿè¿›è¡Œæ‰˜ç®¡ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†çš„é™æ€æ–‡ä»¶åŸºæœ¬å®Œæˆäº†ã€‚")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥å°±åœ¨å…¥å£æ–‡ä»¶"),a("code",[t._v("index.js")]),t._v("ä¸­å¼•å…¥è¿™ä¸ªæ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v("  Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" serveStaticPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./plugins/server/serveStaticPlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cwd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        root\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolvePlugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é™æ€èµ„æºæœåŠ¡")]),t._v("\n        serveStaticPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    resolvePlugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬é¦–å…ˆè·å–ç›®æ ‡é¡¹ç›®çš„æ ¹ç›®å½•è·¯å¾„ï¼Œå¹¶ä¸"),a("code",[t._v("app")]),t._v("ä¸€èµ·ä½œä¸ºä¸Šä¸‹æ–‡ä¼ ç»™æ¯ä¸ªæ’ä»¶è¿›è¡Œç›¸åº”å¤„ç†ï¼Œè¿™é‡Œä½¿ç”¨æ•°ç»„å­˜å…¥æˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„æ’ä»¶ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œï¼Œç®€åŒ–ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("å‡†å¤‡å·¥ä½œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ¥è§£å†³ä¸Šé¢æˆ‘ä»¬ç•™ä¸‹æ¥çš„ä¸¤ä¸ªé—®é¢˜äº†ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¦‚ä½•ä¿®æ”¹æ¨¡å—çš„ å¼•å…¥è·¯å¾„è®©æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«")]),t._v(" "),a("li",[t._v("æ‹†åˆ†"),a("code",[t._v(".vue")]),t._v("æ–‡ä»¶ä¸ºå¤šä¸ªè¯·æ±‚")])]),t._v(" "),a("h3",{attrs:{id:"é‡å†™æ¨¡å—è·¯å¾„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é‡å†™æ¨¡å—è·¯å¾„"}},[t._v("#")]),t._v(" é‡å†™æ¨¡å—è·¯å¾„")]),t._v(" "),a("p",[t._v("åœ¨è¿›è¡Œä»£ç ç¼–å†™å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡® ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦é‡å†™æ¨¡å—è·¯å¾„ï¼Ÿ")]),t._v(" "),a("p",[t._v("è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ä½¿ç”¨"),a("code",[t._v("import")]),t._v("æ–¹å¼å¯¼å…¥æ¨¡å—çš„æ—¶å€™ï¼Œæµè§ˆå™¨åªèƒ½è¯†åˆ«"),a("code",[t._v("./")]),t._v("ã€"),a("code",[t._v("../")]),t._v("ã€"),a("code",[t._v("/")]),t._v("è¿™ç§å¼€å¤´çš„è·¯å¾„ï¼Œå¯¹äºç›´æ¥ä½¿ç”¨æ¨¡å—åæ¯”å¦‚ï¼š"),a("code",[t._v("import vue from 'vue'")]),t._v("ï¼Œæµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæ— æ³•è¯†åˆ«è¿™ç§è·¯å¾„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œå¤„ç†çš„åœ°æ–¹äº†ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d2f9094422c4096902f0f1952890c3f~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆåœ¨åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶"),a("code",[t._v("plugins/server/rewriteModulePlugin.js")]),t._v("ï¼Œå¹¶åœ¨"),a("code",[t._v("index.js")]),t._v("ä¸­å¼•å…¥ï¼Œå¼•å…¥æ–¹å¼åŒä¸Šï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rewriteModulePlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./plugins/server/rewriteModulePlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolvePlugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    rewriteModulePlugin\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é™æ€èµ„æºæœåŠ¡")]),t._v("\n    serveStaticPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("ç„¶åå†è¿›å…¥"),a("code",[t._v("rewriteModulePlugin.js")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rewriteModulePlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" readBody "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rewriteImports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rewriteImports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[t._v("å…ˆä»å¯¼å‡ºçš„å‡½æ•°å¼€å§‹ç ”ç©¶ï¼Œæš‚æ—¶çœç•¥"),a("code",[t._v("rewriteImports")]),t._v("ï¼Œè¿™é‡Œæˆ‘ä»¬æ³¨å†Œäº†ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¹¶ä½¿ç”¨"),a("code",[t._v("await next()")]),t._v("è¿™ç§æ–¹å¼æ¥è·å–è¢«åç»­ä¸­é—´ä»¶å¤„ç†å®Œä¹‹åçš„èµ„æºå¹¶è¿›è¡Œç›¸å…³æ“ä½œï¼ˆ"),a("code",[t._v("koa")]),t._v("çš„æ´‹è‘±æ¨¡å‹ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æ‹¦æˆªå“åº”çš„æ–‡ä»¶ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦æ˜¯"),a("code",[t._v("js")]),t._v("æ–‡ä»¶ï¼Œå› ä¸ºåªæœ‰"),a("code",[t._v("js")]),t._v("æ–‡ä»¶æ‰å¯èƒ½ä½¿ç”¨"),a("code",[t._v("import")]),t._v("æ–¹æ³•å¯¼å…¥æ¨¡å—ï¼Œæ¥ç€è¯»å–å“åº”çš„å†…å®¹ï¼Œç„¶åè°ƒç”¨é‡å†™æ¨¡å—è·¯å¾„çš„ æ–¹æ³•"),a("code",[t._v("rewriteImports")]),t._v("å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("p",[t._v("è¿™é‡Œç”¨åˆ°äº†"),a("code",[t._v("readBody")]),t._v("æ–¹æ³•ï¼Œå®ƒä¸»è¦æ˜¯ç”¨äºè¯»å–æ–‡ä»¶å†…å®¹çš„ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// util.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Readable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("stream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stream "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Readable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨è¯»å–"),a("code",[t._v("ctx.body")]),t._v("æ—¶å®ƒç»å¸¸ä¼šä»¥æµçš„å½¢å¼è¿›è¡Œä¼ è¾“ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³è¦è·å–å®Œæ•´çš„å†…å®¹å°±éœ€è¦å¯¹æµè¿™ç§ä¿¡æ¯çš„å†…å®¹è¿›è¡Œå¤„ç†ï¼Œå¹¶è¿›è¡Œè¿”å›ï¼Œå¦‚ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬ç›‘å¬ç›¸åº”çš„äº‹ä»¶ï¼Œå¹¶è·å–æ•°æ®è¿›è¡Œæ‹¼æ¥ï¼Œæœ€åè¿”å›ç»™è°ƒç”¨è€…ï¼Œç”±äºæ˜¯å¼‚æ­¥çš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œç”¨åˆ°äº†"),a("code",[t._v("Promise")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å½“ç„¶ï¼Œå¦‚æœä¸æ˜¯æµï¼Œè€Œæ˜¯ç”¨"),a("code",[t._v("readFile")]),t._v("è¿™ç§æ–¹å¼è¯»å–çš„å†…å®¹ï¼Œæˆ‘ä»¬å°±ç›´æ¥è½¬ä¸ºå­—ç¬¦ä¸²è¿”å›å°±è¡Œäº†ã€‚")]),t._v(" "),a("p",[t._v("å›åˆ°æ­£é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹"),a("code",[t._v("rewriteImports")]),t._v("è¿™ä¸ªæ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rewriteModulePlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" parse "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'es-module-lexer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MargicString "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'magic-string'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rewriteImports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    imports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    magicString "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MargicString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        imports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" reg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/^[^\\/\\.]/")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/@modules/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                magicString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("overwrite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" magicString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸¤ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼š")]),t._v(" "),a("h4",{attrs:{id:"es-module-lexer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es-module-lexer"}},[t._v("#")]),t._v(" es-module-lexer")]),t._v(" "),a("p",[t._v("ä¸»è¦ç”¨äºè§£æç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„"),a("code",[t._v("import")]),t._v("è¯­å¥ï¼Œå¹¶å°†"),a("code",[t._v("import")]),t._v("è¯­å¥åçš„æ¨¡å—è·¯å¾„çš„ä¿¡æ¯è§£æå‡ºæ¥ã€‚å®ƒæ˜¯ä¸€ä¸ª æ•°ç»„ï¼Œå› ä¸ºä¸€èˆ¬æ¥è¯´"),a("code",[t._v("import")]),t._v("ä¸ä¼šåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥éå†è¿™ä¸ªåˆ—è¡¨æ¥æ‰¾å‡ºä¸ç¬¦åˆè¦æ±‚çš„æ¨¡å—è·¯å¾„å¹¶è¿›è¡Œé‡å†™ã€‚")]),t._v(" "),a("p",[t._v("æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š"),a("code",[t._v("s")]),t._v("ï¼ˆæ¨¡å—è·¯å¾„åœ¨å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®ï¼‰ã€"),a("code",[t._v("e")]),t._v("ï¼ˆæ¨¡å—è·¯å¾„åœ¨å­—ç¬¦ä¸²ä¸­ç»“æŸä½ç½®ï¼‰ã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼Œæˆ‘ä»¬ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è¯»å–å‡ºæ¥ï¼Œä¼ ç»™"),a("code",[t._v("es-module-lexer")]),t._v("çš„"),a("code",[t._v("parse")]),t._v("æ–¹æ³•ï¼Œé‚£ä¹ˆè¿”å›çš„ç»“æœå°±æ˜¯ï¼š"),a("code",[t._v("[{s: 17, e: 21, ...}]")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v("s")]),t._v("å…¶å®å°±æ˜¯ä»£è¡¨åé¢é‚£ä¸ª"),a("code",[t._v("v")]),t._v("çš„ä½ç½®ï¼Œ"),a("code",[t._v("e")]),t._v("å°±ä»£è¡¨ä¸Šé¢"),a("code",[t._v("e")]),t._v("è¿™ä¸ªå­—ç¬¦çš„åä¸€ä½ã€‚")]),t._v(" "),a("h4",{attrs:{id:"magic-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#magic-string"}},[t._v("#")]),t._v(" magic-string")]),t._v(" "),a("p",[t._v("è¿™ä¸ªåŒ…ä¸»è¦æ˜¯ç”¨äºä¿®æ”¹æºä»£ç çš„ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥æ›¿æ¢ç›¸å…³çš„æ¨¡å—è·¯å¾„çš„å·¥å…·ã€‚")]),t._v(" "),a("p",[t._v("ä»‹ç»å®Œä¸Šé¢ä¸¤ä¸ªåŒ…ä¹‹åå…¶ä»–çš„ä»£ç å°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œé¦–å…ˆæˆ‘ä»¬å¯¹"),a("code",[t._v("parse")]),t._v("è§£æå®Œçš„ç»“æœè¿›è¡Œéå†ï¼Œæˆªå–æ¨¡å—è·¯å¾„ï¼Œå¹¶è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œå¦‚æœä¸æ˜¯ä»¥"),a("code",[t._v("./")]),t._v("ã€"),a("code",[t._v("../")]),t._v("æˆ–"),a("code",[t._v("/")]),t._v("å¼€å¤´çš„ï¼Œæˆ‘ä»¬å°±å¯¹å®ƒè¿›è¡Œé‡å†™ï¼Œåœ¨å¯¹åº”çš„æ¨¡å—è·¯å¾„å‰åŠ ä¸Š"),a("code",[t._v("/@modules")]),t._v("å‰ç¼€ï¼Œä»¥ä¾¿äºæˆ‘ä»¬åç»­è¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†å®Œå†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("p",[t._v("é‡å†™å®Œè¯·æ±‚è·¯å¾„ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æœåŠ¡ç«¯æ‹¦æˆª"),a("code",[t._v("/@modules")]),t._v("å¼€å¤´çš„æ‰€æœ‰è¯·æ±‚ï¼Œå¹¶è¯»å–ç›¸åº”æ•°æ®ç»™å®¢æˆ·ç«¯äº†ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è§£ææ¨¡å—è·¯å¾„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£ææ¨¡å—è·¯å¾„"}},[t._v("#")]),t._v(" è§£ææ¨¡å—è·¯å¾„")]),t._v(" "),a("p",[t._v("åœ¨å¤„ç†å®Œæ‰€æœ‰æ¨¡å—è·¯å¾„ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æœåŠ¡ç«¯æ¥è§£ææ¨¡å—çœŸå®ä½ç½®ã€‚é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶"),a("code",[t._v("plugins/server/moduleResolvePlugin.js")]),t._v(",åœ¨"),a("code",[t._v("index.js")]),t._v("ä¸­å¯¼å…¥ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleResolvePlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./plugins/server/moduleResolvePlugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolvePlugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡å†™æ¨¡å—è·¯å¾„")]),t._v("\n    rewriteModulePlugin\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£ææ¨¡å—è·¯å¾„")]),t._v("\n    moduleResolvePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é™æ€èµ„æºæœåŠ¡")]),t._v("\n    serveStaticPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("è¿™é‡Œéœ€è¦æ³¨æ„ä¸­é—´ä»¶çš„é¡ºåºé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨è¯»å–å®Œç¬¬ä¸‰æ–¹æ¨¡å—ç»™å®¢æˆ·ç«¯æ—¶ï¼Œä¹Ÿéœ€è¦å»è§£æè¯¥æ¨¡å—ä¸­ä¼šå¼•å…¥å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆå®ƒçš„è·¯å¾„ä¹Ÿæ˜¯éœ€è¦å¤„ç†çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// moduleResolvePlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promises"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleReg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/^\\/@modules\\//")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vueResolved "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveVue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ®viteè¿è¡Œè·¯å¾„è§£æå‡ºæ‰€æœ‰vueç›¸å…³æ¨¡å—")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("moduleReg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å»é™¤/@modules/ï¼Œæ‹¿åˆ°ç›¸å…³æ¨¡å—")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleReg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®å“åº”ç±»å‹")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vueResolved"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[t._v("å…ˆæ¥çœ‹å®ƒçš„å¯¼å‡ºæ–¹æ³•ï¼Œä»æ•´ä¸ªç»“æ„æ¥çœ‹å…¶å®ä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼Œé¦–å…ˆæ­£åˆ™åŒ¹é…è¯·æ±‚è·¯å¾„ï¼Œå¦‚æœæ˜¯"),a("code",[t._v("/@modules")]),t._v("å¼€å¤´å°±è¿›è¡Œåç»­å¤„ç†ï¼Œå¦åˆ™å°±è·³è¿‡ï¼Œå¹¶è®¾ç½®å“åº”ç±»å‹ä¸º"),a("code",[t._v("js")]),t._v("ï¼Œè¯»å–çœŸå®æ¨¡å—è·¯å¾„å†…å®¹ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™é‡Œé‡ç‚¹åº”è¯¥åœ¨äºæ€ä¹ˆå»è·å–æ¨¡å—çœŸå®è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­"),a("code",[t._v("resolveVue")]),t._v("éœ€è¦åšçš„äº‹æƒ…ï¼Œå®ƒä¼šè§£æå‡ºä¸€ä¸ªçœŸå®è·¯å¾„ä¸æ¨¡å—åçš„æ˜ å°„å…³ç³»ï¼Œæˆ‘ä»¬å°±èƒ½é€šè¿‡æ¨¡å—åç›´æ¥æ‹¿åˆ°çœŸå®è·¯å¾„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// moduleResolvePlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveVue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("root")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œvue3å‡ ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„åŒ…æœ‰ï¼šruntime-core runtime-dom reactivity shared")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¶æ¬¡æˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ° compiler-sfc è¿›è¡Œåç«¯ç¼–è¯‘.vueæ–‡ä»¶")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœéœ€è¦è¿›è¡Œåç«¯ç¼–è¯‘ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‹¿åˆ°commonjsè§„èŒƒçš„æ¨¡å—")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilerPkgPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/compiler-sfc/package.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilerPkg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilerPkgPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡package.jsonçš„mainèƒ½å¤Ÿæ‹¿åˆ°ç›¸å…³æ¨¡å—çš„è·¯å¾„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilerPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilerPkgPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compilerPkg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨äºè§£æå…¶ä»–æ¨¡å—è·¯å¾„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("resolvePath")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("@vue/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/dist/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(".esm-bundler.js")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" runtimeCorePath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolvePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'runtime-core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" runtimeDomPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolvePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'runtime-dom'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" reactivityPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolvePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reactivity'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sharedPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolvePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'shared'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" compilerPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/runtime-dom'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" runtimeDomPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/runtime-core'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" runtimeCorePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/reactivity'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" reactivityPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/shared'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" sharedPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        vue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" runtimeDomPath\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])]),a("p",[t._v("æ­£å¦‚æ³¨é‡Šä¸­å†™é“ï¼Œ"),a("code",[t._v("vue3")]),t._v("å‡ ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„åŒ…æœ‰ï¼š"),a("code",[t._v("runtime-core")]),t._v(" ã€"),a("code",[t._v("runtime-dom")]),t._v(" ã€"),a("code",[t._v("reactivity")]),t._v(" ã€"),a("code",[t._v("shared")]),t._v("ï¼Œä»¥åŠç¼–è¯‘"),a("code",[t._v(".vue")]),t._v("éœ€è¦ç”¨åˆ°çš„"),a("code",[t._v("compiler-sfc")]),t._v("ï¼Œå› ä¸ºå¯¹"),a("code",[t._v("vue")]),t._v("å•æ–‡ä»¶è§£æå°†ç”±æœåŠ¡ç«¯è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™é‡Œä¸»è¦æ˜¯å¤„ç†"),a("code",[t._v("Vue3")]),t._v("ç›¸å…³çš„å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæš‚æ—¶æ²¡æœ‰å¤„ç†å…¶ä»–ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œéœ€è¦åç»­å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—ä¹Ÿè¿›è¡Œè§£æï¼Œå…¶å®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæ‰¾å‡ºä»–ä»¬åœ¨"),a("code",[t._v("node_modules")]),t._v("ä¸­çš„å…¥å£æ–‡ä»¶ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯æœ‰è§„å¾‹çš„ï¼Œä¹‹ååªè¦æ¥æ”¶åˆ°ç›¸å…³æ¨¡å—çš„è¯·æ±‚å°±èƒ½è¿›è¡Œç»Ÿä¸€è¯»å–è¿”å›äº†ã€‚")])]),t._v(" "),a("p",[t._v("ç„¶åæˆ‘ä»¬æ¥çœ‹è§£æè¿‡ç¨‹ï¼Œç”±äº"),a("code",[t._v("compiler-sfc")]),t._v("æ¨¡å—ä½ç½®ä¸å…¶ä»–å‡ ä¸ªä¸ä¸€æ ·ï¼Œæ‰€ä»¥å…ˆå•ç‹¬å¤„ç†ï¼Œé¦–å…ˆæ‹¿åˆ°å®ƒå¯¹åº”çš„æè¿°æ–‡ä»¶"),a("code",[t._v("package.json")]),t._v("ï¼Œé€šè¿‡"),a("code",[t._v("main")]),t._v("å­—æ®µå°±èƒ½çŸ¥é“å®ƒçš„å…¥å£æ–‡ä»¶æ˜¯å“ªä¸ªï¼š"),a("code",[t._v("node_modules/@vue/compiler-sfc/package.json")]),t._v("ï¼Œç„¶åæ‹¼æ¥ä¸€ä¸‹"),a("code",[t._v("package.json")]),t._v("æ‰€åœ¨ç›®å½•ï¼Œå°±èƒ½æ‹¿åˆ°è¯¥æ¨¡å—çš„çœŸå®è·¯å¾„äº†ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºå…¶ä»–å‡ ä¸ª"),a("code",[t._v("vue")]),t._v("æ ¸å¿ƒæ¨¡å—ï¼Œç”±äºä»–ä»¬çš„"),a("code",[t._v("es")]),t._v("æ¨¡å—æŸ¥æ‰¾è§„å¾‹æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æŠ½ç¦»ä¸€ä¸ªè§£æå‡½æ•°"),a("code",[t._v("resolvePath")]),t._v("ï¼Œå°±èƒ½åšåˆ°ç»Ÿä¸€å¤„ç†äº†ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆè¦å†™è¿™ä¹ˆé•¿çš„è·¯å¾„ï¼Œå› ä¸ºæ¨¡å—é»˜è®¤å¯¼å‡ºéƒ½æ˜¯"),a("code",[t._v("commonjs")]),t._v("çš„æ–¹å¼ï¼Œè€Œè¿™å¯¹äºæµè§ˆå™¨æ¥è¯´æ˜¯ä¸è¯†åˆ«çš„ï¼Œæ‰€ä»¥éœ€è¦æ‰¾åˆ°å¯¹åº”çš„"),a("code",[t._v("es")]),t._v("æ¨¡å—ã€‚")]),t._v(" "),a("p",[t._v("æœ€åè¿”å›ä¸€ä¸ªæ¨¡å—ä¸å¤„ç†å¥½çš„è·¯å¾„çš„æ˜ å°„å¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„å‡ ä¸ªæ¨¡å—å°±èƒ½é¡ºåˆ©è¯»å–äº†ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸ºä»€ä¹ˆéœ€è¦å¯¹"),a("code",[t._v("vue")]),t._v("çš„è¿™äº›æ¨¡å—å•ç‹¬å¤„ç†ä¸€ä¸‹å‘¢ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å¯¼å…¥"),a("code",[t._v("vue")]),t._v("çš„æ—¶å€™ï¼Œå®ƒçš„å†…éƒ¨ä¼šå»å¯¼è¿™å‡ ä¸ªæ ¸å¿ƒåŒ…ï¼Œå¦‚æœä¸é¢„å…ˆè¿›è¡Œè§£æï¼Œå°±æ— æ³•æ‰¾åˆ°è¿™å‡ ä¸ªæ¨¡å—çš„ä½ç½®ï¼Œå¯¼è‡´é¡¹ç›®è¿è¡Œé”™è¯¯ã€‚")])]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f22947c82c934ae9aa6c4dc7ec2dc597~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20200910210115834"}})]),t._v(" "),a("p",[t._v("ç‚¹å¼€å›¾ä¸­"),a("code",[t._v("vue")]),t._v("è¿™ä¸ªæ¨¡å—è¿”å›çš„å†…å®¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å‡ ä¸ªæ ¸å¿ƒæ¨¡å—éƒ½æ˜¯è¢«åŒ…å«äº†çš„ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å®¢æˆ·ç«¯æ³¨å…¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯æ³¨å…¥"}},[t._v("#")]),t._v(" å®¢æˆ·ç«¯æ³¨å…¥")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºä¸€èˆ¬çš„é¡¹ç›®æ¥è¯´ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå»ä½¿ç”¨"),a("code",[t._v("process.env")]),t._v("å»åˆ¤æ–­ç¯å¢ƒï¼Œè€Œå¦‚æœä½ é‡‡ç”¨è„šæ‰‹æ¶å·¥å…·è¿›è¡Œå¼€å‘æ—¶"),a("code",[t._v("webpack")]),t._v("ä¼šæ¥å¸®æˆ‘ä»¬åšè¿™ä»¶äº‹ï¼Œæ‰€ä»¥åœ¨"),a("code",[t._v("vite")]),t._v("ä¸­æˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹å®ƒè¿›è¡Œä¸€ä¸ªå¤„ç†ï¼Œå¦‚æœæ²¡æœ‰è¿™é¡¹å¤„ç†ä½ åœ¨è¿è¡Œé¡¹ç›®æ—¶å°±ä¼šçœ‹åˆ°è¿™æ ·çš„æŠ¥é”™ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1dcce6c86a94724bc79b12fb0ad0133~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20200910210543937"}})]),t._v(" "),a("p",[t._v("å®ƒä¼šå‘Šè¯‰æˆ‘ä»¬"),a("code",[t._v("process")]),t._v("è¿™ä¸ªå˜é‡å¹¶æ²¡æœ‰è¢«å®šä¹‰ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯æ³¨å…¥ç›¸å…³çš„ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("æ–°å»ºä¸€ä¸ªæ–‡ä»¶"),a("code",[t._v("plugins/server/htmlRewritePlugin.js")]),t._v("ï¼Œå¹¶åœ¨"),a("code",[t._v("index.js")]),t._v("ä¸­å†™å…¥ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolvePlugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡å†™htmlï¼Œæ’å…¥éœ€è¦çš„ä»£ç ")]),t._v("\n        htmlRewritePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡å†™æ¨¡å—è·¯å¾„")]),t._v("\n        rewriteModulePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£ææ¨¡å—è·¯å¾„")]),t._v("\n        moduleResolvePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é™æ€èµ„æºæœåŠ¡")]),t._v("\n        serveStaticPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("åŒæ ·ä¹Ÿéœ€è¦æ³¨æ„ä¸­é—´ä»¶çš„é¡ºåºé—®é¢˜ï¼Œè¿™ä¸ªä¸­é—´ä»¶å¿…é¡»å¤„äº"),a("code",[t._v("serveStaticPlugin")]),t._v("ä¹‹å‰ï¼Œå› ä¸ºéœ€è¦ä¿è¯å®ƒèƒ½å¤Ÿæ•æ‰åˆ°"),a("code",[t._v("html")]),t._v("ç›¸å…³æ–‡ä»¶çš„ è¯·æ±‚ï¼Œè¿™é‡ŒæŠŠå®ƒæ”¾åˆ°ç¬¬ä¸€ä½ã€‚")]),t._v(" "),a("p",[t._v("å…¶å®å†…éƒ¨å®ç°ä¹Ÿéå¸¸ç®€å•ï¼š")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("Talk is cheap. Show me the code.")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" readBody "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨äºå¤„ç†é¡¹ç›®è·å–ç¯å¢ƒå˜é‡æŠ¥é”™é—®é¢˜")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        <script type='text/javasript'>\n            window.process = {\n                env: {\n                    NODE_ENV: 'development'\n                }\n            };\n        <\/script>\n    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/<head>/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("$&")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("inject"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("p",[t._v("è¿™é‡Œå…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("script")]),t._v("æ ‡ç­¾ï¼Œå¹¶åœ¨"),a("code",[t._v("window")]),t._v("ä¸Šæ‰‹åŠ¨æŒ‚è½½è¿™ä¸ªå…¨å±€å˜é‡ï¼Œå¹¶æŠŠæ¨¡å¼ç½®ä¸ºå¼€å‘æ¨¡å¼ï¼Œç„¶åå°†å…¶æ’å…¥åˆ°"),a("code",[t._v("head")]),t._v("æ ‡ç­¾ä¸­ï¼Œè¿™æ ·å®¢æˆ·ç«¯åœ¨è§£æ"),a("code",[t._v("html")]),t._v("æ–‡ä»¶çš„æ—¶å€™å°±èƒ½å°†è¿™æ®µä»£ç æ‰§è¡Œäº†ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è§£æ-vueæ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£æ-vueæ–‡ä»¶"}},[t._v("#")]),t._v(" è§£æ"),a("code",[t._v(".vue")]),t._v("æ–‡ä»¶")]),t._v(" "),a("h4",{attrs:{id:"å‡†å¤‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‡†å¤‡"}},[t._v("#")]),t._v(" å‡†å¤‡")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥å°±åˆ°æˆ‘ä»¬ååˆ†æœ‰æ„æ€çš„åœ°æ–¹äº†ï¼Œæ·±å…¥æ¢ç©¶"),a("code",[t._v("vite")]),t._v("å¦‚ä½•å°†å•æ–‡ä»¶ç¼–è¯‘æˆå¤šä¸ªè¯·æ±‚çš„ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆè¿˜æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶åˆ°"),a("code",[t._v("plugins/server")]),t._v("ä¸‹ï¼Œå¹¶åœ¨"),a("code",[t._v("index.js")]),t._v("ä¸­å¼•å…¥ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolvePlugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡å†™htmlï¼Œæ’å…¥éœ€è¦çš„ä»£ç ")]),t._v("\n        htmlRewritePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡å†™æ¨¡å—è·¯å¾„")]),t._v("\n        rewriteModulePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£æ.vueæ–‡ä»¶")]),t._v("\n        vueServerPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£ææ¨¡å—è·¯å¾„")]),t._v("\n        moduleResolvePlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é™æ€èµ„æºæœåŠ¡")]),t._v("\n        serveStaticPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("åœ¨è¯¦ç»†ç ”ç©¶å†…éƒ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆéœ€è¦æ˜ç¡®ä¸€ä¸‹éœ€è¦æŠŠå®ƒå¤„ç†æˆä»€ä¹ˆæ ·å­ï¼Œè¿™é‡Œæˆ‘ä»¬åŒæ ·æ‰“å¼€æˆ‘ä»¬çš„"),a("code",[t._v("vue3")]),t._v("é¡¹ç›®åœ°å€ï¼Œæ‰¾åˆ°å®ƒå¯¹"),a("code",[t._v("App.vue")]),t._v("çš„è¿”å›ç»“æœï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a091b93adfdb4143824f0841b373555f~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20200910212716080"}})]),t._v(" "),a("p",[t._v("è¿™é‡Œå°†ä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶åˆ†ä¸ºäº†å‡ ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯"),a("code",[t._v("script")]),t._v("éƒ¨åˆ†ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡ä¿å­˜ï¼Œå¹¶åœ¨ä¸‹æ–¹ç»™è¯¥å¯¹è±¡æ·»åŠ "),a("code",[t._v("render")]),t._v("æ–¹æ³•ï¼Œæœ€åå¯¼å‡ºè¿™ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ª"),a("code",[t._v("render")]),t._v("æ–¹æ³•æ˜¯ä»å¯¼å…¥çš„ï¼Œå…¶å®å®ƒæœ¬è´¨ä¸Šå°±æ˜¯è·å–åœ¨æœåŠ¡ç«¯è§£æå¥½çš„ç”¨äºæ¸²æŸ“å•æ–‡ä»¶ç»„ä»¶ä¸­"),a("code",[t._v("template")]),t._v("æ ‡ç­¾ä¸‹çš„å†…å®¹çš„æ¸²æŸ“å‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åå°±æ˜¯å°†å¤šä¸ª"),a("code",[t._v("style")]),t._v("æ ‡ç­¾ä¹Ÿåœ¨æœåŠ¡ç«¯è§£æå‡ºæ¥å¹¶åœ¨å®¢æˆ·ç«¯ä»¥è¯·æ±‚çš„æ–¹å¼è·å–ã€‚")]),t._v(" "),a("h4",{attrs:{id:"åˆ†ç±»å‹è§£æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†ç±»å‹è§£æ"}},[t._v("#")]),t._v(" åˆ†ç±»å‹è§£æ")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä»£ç æ€ä¹ˆæ‰“é€ å‡ºè¿™æ ·çš„ç»“æ„ï¼Œå¹¶å¤„ç†è¿™å‡ ä¸ªè¯·æ±‚ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/server/vueServerPlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCompilerPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("root")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilerPkgPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/compiler-\t\tsfc/package.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compilerPkg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilerPkgPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡package.jsonçš„mainèƒ½å¤Ÿæ‹¿åˆ°ç›¸å…³æ¨¡å—çš„è·¯å¾„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilerPkgPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compilerPkg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" filepath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¿åˆ°æ–‡ä»¶å†…å®¹")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filepath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" parse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compileTemplate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCompilerPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" descriptor "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§£ææ–‡ä»¶å†…å®¹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("p",[t._v("è¿™é‡Œå…ˆæˆªå–ä¸€å°éƒ¨åˆ†è¿›è¡Œè§£æï¼ŒåŒæ ·æ³¨å†Œä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¹¶åˆ¤æ–­å½“å‰è¯·æ±‚çš„æ–‡ä»¶æ˜¯ä¸æ˜¯"),a("code",[t._v(".vue")]),t._v("ç»“å°¾ï¼Œå› ä¸ºè¿™ä¸ªä¸­é—´ä»¶åªå¯¹å•æ–‡ä»¶ç»„ä»¶è¿›è¡Œå¤„ç†ï¼Œå¯¹äºé"),a("code",[t._v(".vue")]),t._v("æ–‡ä»¶å°±ç›´æ¥è·³è¿‡å°±è¡Œäº†ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯"),a("code",[t._v("vue")]),t._v("æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨"),a("code",[t._v("compiler-sfc")]),t._v("è¿™ä¸ªæ¨¡å—å¯¹è¯¥æ–‡ä»¶è¿›è¡Œè§£æï¼Œè¿™é‡Œæˆ‘ä»¬æš‚æ—¶åªç”¨åˆ°äº†å®ƒçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯"),a("code",[t._v("parse")]),t._v("ï¼Œç”¨äºè§£æç»„ä»¶ä¸ºå‡ ä¸ªä¸åŒéƒ¨åˆ†ï¼Œç¬¬äºŒä¸ªå°±æ˜¯ç”¨æ¥ç¼–è¯‘"),a("code",[t._v("template")]),t._v("å†…å®¹çš„æ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("å…ˆè°ƒç”¨"),a("code",[t._v("parse")]),t._v("æ–¹æ³•æ‹¿åˆ°"),a("code",[t._v("descriptor")]),t._v("è¿™ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æˆ‘ä»¬æ‰€éœ€è¦çš„ "),a("code",[t._v("script")]),t._v("ã€"),a("code",[t._v("template")]),t._v("ã€"),a("code",[t._v("style")]),t._v("ç›¸å…³æ•°æ®ï¼Œä¸‹é¢æ¥çœ‹æ€ä¹ˆä¸€ä¸€è§£æå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/server/vueServerPlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultExportRE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/((?:^|\\n|;)\\s*)export default/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" replaced "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defaultExportRE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$1const __script = '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" replaced"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\nimport "')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("?type=style&index=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" templateRequest "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?type=template'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nimport { render as __render } from ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("templateRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\n__script.render = __render")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nexport default __script")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("p",[t._v("è‡ªé¡¶å‘ä¸‹çœ‹ï¼Œå®šä¹‰ä¸€ä¸ª"),a("code",[t._v("code")]),t._v("å˜é‡ï¼Œç”¨äºåç»­ä»£ç æ‹¼æ¥ã€‚å¤–å±‚å…ˆä¼šåˆ¤æ–­æ˜¯å¦æ˜¯è¢«å¤„ç†è¿‡çš„è¯·æ±‚ï¼ˆè¢«å¤„ç†åçš„è¯·æ±‚éƒ½ä¼šå­˜åœ¨"),a("code",[t._v("query")]),t._v("å‚æ•°ï¼‰ï¼Œç„¶ååˆ¤æ–­"),a("code",[t._v("descriptor")]),t._v("ä¸Šæœ‰æ²¡æœ‰"),a("code",[t._v("script")]),t._v("å±æ€§ï¼ˆä¹Ÿå°±æ˜¯å•æ–‡ä»¶ç»„ä»¶ä¸­æ˜¯å¦å­˜åœ¨ "),a("code",[t._v("script")]),t._v("æ ‡ç­¾ï¼‰ï¼Œå¦‚æœå­˜åœ¨åˆ™ç»™"),a("code",[t._v("code")]),t._v("å˜é‡æ·»åŠ ç›¸å…³ä»£ç ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("æˆ‘ä»¬åœ¨çœ‹å®ƒçš„å¤„ç†ä»£ç éƒ¨åˆ†å‰ï¼Œæœ€å¥½å†å›æƒ³ä¸€ä¸‹æˆ‘ä»¬ä¸Šé¢ä»‹ç»è¿‡çš„ä¸€ä¸ª"),a("code",[t._v("vue")]),t._v("ç»„ä»¶éœ€è¦è¢«å¤„ç†æˆä»€ä¹ˆæ ·ï¼Œ")])]),t._v(" "),a("p",[t._v("é¦–å…ˆæ‹¿åˆ°è§£æåçš„å†…å®¹ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»¥"),a("code",[t._v("export default")]),t._v("å¼€å¤´çš„ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºäº†è¾¾åˆ°"),a("code",[t._v("vite")]),t._v("å¤„ç†åçš„ç»“æœï¼Œå°±éœ€è¦æŠŠå®ƒæ›¿æ¢ä¸€ä¸‹ï¼Œç”¨ä¸€ä¸ªå˜é‡æ¥ä¿å­˜ï¼Œè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" __script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("æ¥ä¸‹æ¥å†æ¥å¤„ç†"),a("code",[t._v("style")]),t._v("ï¼ŒåŒæ ·ä¼šå…ˆè¿›è¡Œåˆ¤æ–­ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸º"),a("code",[t._v("style")]),t._v("æ ‡ç­¾å¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªï¼Œæ‰€ä»¥åªè¦åˆ¤æ–­ä¸€ä¸‹å®ƒçš„"),a("code",[t._v("length")]),t._v("æ˜¯å¦å¤§äºé›¶ï¼Œå¦‚æœå¤§äºé›¶å°±ç»§ç»­å¾€ä¸‹å¤„ç†ï¼Œå¯¹äº"),a("code",[t._v("style")]),t._v("è€Œè¨€ï¼Œè¿™é‡Œä¸è¿›è¡Œè¯¦ç»†å†…å®¹æ”¹åŠ¨ï¼Œè€Œåªæ˜¯åœ¨"),a("code",[t._v("code")]),t._v("ä¸­æ·»åŠ "),a("code",[t._v("import")]),t._v("å…³é”®å­—ï¼Œå°†è¿™ä¸ª"),a("code",[t._v("style")]),t._v("ä»¥è¯·æ±‚çš„å½¢å¼åœ¨åç»­è¿›è¡Œå¤„ç†ï¼Œå¹¶åœ¨åŸæœ‰è·¯å¾„åé¢æ‹¼æ¥è¯¥ç±»å‹ç›¸å…³çš„"),a("code",[t._v("type")]),t._v("ï¼Œç”¨äºæ ‡è¯†è¯¥è¯·æ±‚çš„å¤„ç†æ–¹å¼ï¼Œå¹¶ç»™æ¯ä¸ª"),a("code",[t._v("style")]),t._v("è¯·æ±‚ä»£ç åºå·ã€‚")]),t._v(" "),a("p",[t._v("ç›¸åº”çš„ï¼Œæˆ‘ä»¬å†æ¥çœ‹"),a("code",[t._v("template")]),t._v("çš„åœ¨è¿™é‡Œçš„å¤„ç†æ–¹å¼ï¼ŒåŒæ ·ä¸å¤„ç†å®ƒçš„å†…å®¹ï¼Œä¹Ÿæ˜¯ä½¿ç”¨"),a("code",[t._v("import")]),t._v("æ–¹å¼è®©æµè§ˆå™¨å»å‘èµ·ä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼Œå¹¶åœ¨è¿™ä¸ªè¯·æ±‚åé¢æ‹¼æ¥"),a("code",[t._v("type")]),t._v("ï¼Œè¡¨æ˜è¯¥è¯·æ±‚çš„ç›®æ ‡å†…å®¹ï¼Œç„¶åæ‹¿åˆ°å¯¼å‡ºçš„"),a("code",[t._v("render")]),t._v("å‡½æ•°ï¼Œå¹¶æŒ‚è½½åˆ°"),a("code",[t._v("__script")]),t._v("å¯¹è±¡ä¸Šã€‚")]),t._v(" "),a("h4",{attrs:{id:"å¤„ç†æ‹†è§£å†…å®¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¤„ç†æ‹†è§£å†…å®¹"}},[t._v("#")]),t._v(" å¤„ç†æ‹†è§£å†…å®¹")]),t._v(" "),a("p",[t._v("ç»¼åˆä¸Šè¿°æ‹†è§£è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç°åœ¨å¯¹äº"),a("code",[t._v("style")]),t._v("å’Œ"),a("code",[t._v("template")]),t._v("ç±»å‹çš„è¯·æ±‚è¿˜æ²¡æœ‰å¤„ç†ï¼Œæ‰€ä»¥ï¼Œæ¥ä¸‹æ¥éœ€è¦å°†è¿™éƒ¨åˆ†è¯¦ç»†çš„å†…å®¹è§£æå®Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("p",[t._v("å¯¹"),a("code",[t._v("style")]),t._v("çš„å¤„ç†ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/server/vueServerPlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" styleBlock "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        \\n const __css = ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("styleBlock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        \\n updateCss(__css)\n        \\n export default __css\n    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("é¦–å…ˆæ‹¿åˆ°è¯·æ±‚çš„"),a("code",[t._v("query")]),t._v("å‚æ•°ä¸­çš„å½“å‰"),a("code",[t._v("style")]),t._v("è¯·æ±‚çš„éœ€è¦ï¼Œä¹Ÿå°±æ˜¯å®ƒåœ¨"),a("code",[t._v("descriptor.styles")]),t._v("ä¸­çš„ç´¢å¼•ä½ç½®ï¼Œç„¶åå°±èƒ½æ‹¿åˆ°è¿™ä¸ª"),a("code",[t._v("style")]),t._v("æ ‡ç­¾å†…éƒ¨çš„å†…å®¹ï¼Œæ¥ç€è®¾ç½®å“åº”ç±»å‹ï¼Œå†å°†éœ€è¦åœ¨å®¢æˆ·ç«¯æ‰§è¡ŒæŒ‚è½½"),a("code",[t._v("css")]),t._v("çš„ä»£ç è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬å”¯ä¸€éœ€è¦å…³æ³¨çš„ç‚¹å°±åœ¨äº"),a("code",[t._v("updateCss")]),t._v("è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒæ˜¯ç”¨æ¥å¤„ç†"),a("code",[t._v("css")]),t._v("çš„è§£æçš„ï¼Œä¹Ÿæ˜¯éœ€è¦é¢„å…ˆè¢«æ³¨å…¥åˆ°å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦åœ¨ä¹‹å‰å®¢æˆ·ç«¯æ³¨å…¥çš„ä¸­é—´ä»¶ä¸­åŠ ä¸Šè¯¥æ–¹æ³•ã€‚")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/server/htmlRewritePlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" readBody "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨äºå¤„ç†é¡¹ç›®è·å–ç¯å¢ƒå˜é‡æŠ¥é”™é—®é¢˜")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        <script type='text/javasript'>\n            window.process = {\n                env: {\n                    NODE_ENV: 'development'\n                }\n            };\n\t\t\tfunction updateCss(css) {\n                const style = document.createElement('style');\n                style.type = 'text/css';\n                style.innerHTML = css;\n                document.head.appendChild(style);\n            }\n        <\/script>\n    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/<head>/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("$&")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("inject"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br")])]),a("p",[t._v("è¿™é‡Œçš„å®ç°å®é™…ä¸Šååˆ†ç®€å•ï¼Œå°±ç›´æ¥åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("style")]),t._v("æ ‡ç­¾å¹¶æ·»åŠ åˆ°"),a("code",[t._v("head")]),t._v("å¤´ä¸­å³å¯ï¼Œè¿™æ ·å°±èƒ½è®©ç›¸å…³"),a("code",[t._v("css")]),t._v("ç”Ÿæ•ˆäº†ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™é‡Œä¸»è¦è¿˜æ˜¯ä¸ºäº†å…ˆç®€åŒ–é€»è¾‘ï¼Œå¯¹äº"),a("code",[t._v("css")]),t._v("çš„å¤„ç†å˜æˆ"),a("code",[t._v("mini")]),t._v("ç‰ˆäº† ğŸ‘ã€‚")])]),t._v(" "),a("p",[t._v("æœ€åå°±åªå‰©ä¸‹å¤„ç†"),a("code",[t._v("template")]),t._v("ç±»å‹è¯·æ±‚äº†ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/server/vueServerPlugin.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'template'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compileTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("é¦–å…ˆè®¾ç½®å“åº”ç±»å‹ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ª"),a("code",[t._v("js")]),t._v("æ–‡ä»¶ï¼Œç„¶åæ‹¿åˆ°"),a("code",[t._v("descriptor")]),t._v("ä¸Šçš„"),a("code",[t._v("template")]),t._v("çš„å†…å®¹ï¼Œä½¿ç”¨"),a("code",[t._v("compiler-sfc")]),t._v("çš„"),a("code",[t._v("compileTemplate")]),t._v("ç¼–è¯‘ä¸€ä¸‹ï¼Œæ‹¿åˆ°æœ€ç»ˆç»“æœä¸­çš„"),a("code",[t._v("code")]),t._v("ï¼Œå¹¶ä½œä¸ºè¿”å›ä½“å›ä¼ ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("p",[t._v("è‡ªæ­¤æ•´ä¸ªæµç¨‹åŸºæœ¬å™è¿°å®Œæ¯•äº†ã€‚")]),t._v(" "),a("blockquote",[a("p",[a("em",[t._v("â˜…,Â°")]),t._v(":.â˜†(ï¿£ â–½ ï¿£)/$:"),a("em",[t._v(".Â°â˜…")]),t._v(" ã€‚æ’’èŠ±ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),a("p",[t._v("å¯¹äºæ•´ä¸ªå®ç°é€»è¾‘æ¥çœ‹ï¼Œå®ƒçš„æ ¸å¿ƒæµç¨‹ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆåˆ©ç”¨äº†"),a("code",[t._v("esm")]),t._v("çš„ç‰¹æ€§ï¼Œè®©æµè§ˆå™¨å»åšæ¨¡å—å¯¼å…¥ï¼ŒçœŸæ­£å®ç°æŒ‰éœ€åŠ è½½ï¼Œä¸éœ€è¦åœ¨ä¸€å¼€å§‹å°†æ‰€æœ‰ä»£ç éƒ½æ‰“åŒ…åŠ è½½ï¼Œè¿™æ ·å¯¹äºæ€§èƒ½å¾ˆå¤šæ—¶å€™æ˜¯ä¸€ç§æµªè´¹ã€‚")]),t._v(" "),a("p",[t._v("æ­£å¦‚å°¤å¤§åœ¨æ¨ç‰¹æ‰€è¯´ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5502698906fc4a74abef3ab9ea839059~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),a("p",[t._v("è¿™å¯èƒ½å°†æ—¶ä¸€åœºæ–°çš„å˜é©ï¼Œå®ƒå¯¹æ¯”ä¸"),a("code",[t._v("webpack")]),t._v("æ¥è¯´è§£å†³äº†æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­é™æ€æ‰“åŒ…è¿‡ç¨‹ï¼Œæ˜¯å€¼å¾—æˆ‘ä»¬å»æŒç»­å…³æ³¨å®ƒçš„è¿›å±•ï¼Œä¼´éšç€"),a("code",[t._v("vue3")]),t._v("å¾— æ¨å‡ºï¼Œ"),a("code",[t._v("vite")]),t._v("çš„è¿­ä»£ä¹Ÿæ˜¯é£é€Ÿå¢é•¿ï¼Œè™½ç„¶è¯´åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿˜æœªè¾¾åˆ°èƒ½å¤Ÿæ”¯æŒå¤§å‹é¡¹ç›®çš„ç¨‹åº¦ï¼Œä½†å¹´è½»çš„"),a("code",[t._v("vite")]),t._v("æœ€å¤§çš„ä¼˜ç‚¹è«è¿‡äºå®ƒçš„æ½œåŠ›ï¼Œè™½ç„¶"),a("code",[t._v("vite")]),t._v("è¯ç”Ÿå¹¶ä¸ä¹…ï¼Œä½†æ˜¯å®ƒçš„ç†å¿µåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯èƒ½æ›´åŠ ç¬¦åˆå¼€å‘äººå‘˜çš„éœ€æ±‚ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("æˆåŠŸä¸æ˜¯å°†æ¥æ‰æœ‰çš„ï¼Œè€Œæ˜¯ä»å†³å®šå»åšçš„é‚£ä¸€åˆ»èµ·ï¼ŒæŒç»­ç´¯ç§¯è€Œæˆã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);